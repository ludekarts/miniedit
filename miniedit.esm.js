function t(){return(+new Date+100*Math.random()).toString(32)}function n(t){for(var n=[],e=-1,i=t.length;++e!==i;n[e]=t[e]);return n}function e(e){var i=arguments;if(!Array.isArray(e)||!e.raw)throw new Error("template helper should be called as tagged template string rather than function");var a={},o=e.reduce(function(e,o,r){var c,d=[].slice.call(i,1)[r];if(d instanceof NodeList&&(d=n(d)),d instanceof HTMLElement||Array.isArray(d)){var l=t();a[l]=d,c='<i id="'+l+'" class="_hook_"></i>'}else"string"!=typeof d&&"number"!=typeof d||(c=d);return"string"==typeof c||"number"==typeof c?e+(o+c):e+o},""),r=document.createElement("div");r.insertAdjacentHTML("beforeend",o);var c=n(r.querySelectorAll("[ref]")),d=c.reduce(function(t,n){return t[n.getAttribute("ref")]=n,n.removeAttribute("ref"),t},{});n(r.querySelectorAll("i._hook_")).forEach(function(t){var n=a[t.id],e=t.parentNode;Array.isArray(n)?(n.forEach(function(n){n instanceof HTMLElement&&e.insertBefore(n,t)}),t.remove()):e.replaceChild(n,t)});var l=1===r.children.length?r.children[0]:r;return c.length?[l,d]:l}var i=function(t,n,e){var i=document.createRange(),a=window.getSelection();return i.setStart(t,n),i.setEnd(t,e),a.removeAllRanges(),a.addRange(i),a},a=function(t){var n=window.getSelection(),e=new Range;return e.selectNode(t),n.removeAllRanges(),n.addRange(e),n},o=function(t){if(3!==t.nodeType){var n=window.getSelection(),e=n.getRangeAt(0),i=t.nextSibling&&t.nextSibling.textContent.length?1:0,a=t.nextSibling?t.nextSibling:t;return e.setStart(t.previousSibling?t.previousSibling:t,t.previousSibling&&t.previousSibling.textContent.length?t.previousSibling.textContent.length-1:0),e.setEnd(a,i),n.removeAllRanges(),n.addRange(e),n}},r=function(t){void 0===t&&(t="div");var n=window.getSelection(),e=document.createElement(t);if(!n.isCollapsed){var i=n.getRangeAt(0);e.appendChild(i.cloneContents())}return e};function c(t,n){return n||(n=t.slice(0)),t.raw=n,t}function d(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}var l=function(t){var n=document.createTextNode("\ufeff"),e=document.createTextNode("\ufeff");m(n,t),u(e,t),o(t);var i=t.innerHTML.replace(/\uFEFF/g,"");document.execCommand("insertHTML",!1,i)},s=function(t,n){t&&a(t),document.execCommand("insertHTML",!1,n)},u=function(t,n){n.parentNode.insertBefore(t,n.nextSibling)},m=function(t,n){n.parentNode.insertBefore(t,n)},f='<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M10.101,13.776l0.679,2.262L16.494,3.48L3.923,9.186l2.822,0.847c0.546,0.323-0.183,1.636-1.704,1.386\nl-3.109-1.001L1.62,10.323C1.256,10.138,1,9.771,1,9.335C1,8.884,1.271,8.5,1.656,8.323L1.708,8.3l15.695-7.186l0.072-0.033\nC17.602,1.032,17.736,1,17.879,1C18.498,1,19,1.501,19,2.119c0,0.1-0.031,0.188-0.057,0.279l-0.157,0.343l-7.052,15.368\nl-0.209,0.451C11.32,18.822,11.018,19,10.659,19c-0.453,0-0.837-0.272-1.014-0.657c-0.019-0.041-0.025-0.086-0.039-0.128\nl-0.924-3.073c0,0-0.024-0.068-0.027-0.092C8.547,14.313,9.375,13.016,10.101,13.776z"/></svg>',v='<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M15.4,19H4.33C2.494,19,1,17.73,1,15.745v-10.8c0-0.496,0.503-0.9,1-0.9c0.498,0,1,0.404,1,0.9v10.8\nC3,16.739,3.486,17,4.33,17H15.4c0.498,0,0.9,0.502,0.9,1S15.898,19,15.4,19z"/><path fill="#FFFFFF" d="M19,11.399C19,13.388,17.389,15,15.4,15H8.6C6.612,15,5,13.388,5,11.399V4.601C5,2.612,6.612,1,8.6,1H15.4\nC17.389,1,19,2.612,19,4.601V11.399z M17,4.801C17,3.806,16.193,3,15.199,3H8.801C7.806,3,7,3.806,7,4.801v6.398\nC7,12.193,7.806,13,8.801,13h6.398C16.193,13,17,12.193,17,11.199V4.801z"/></svg>',g='<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M11.4,10l6.303-6.301c0.396-0.4,0.396-1,0-1.4c-0.401-0.398-1-0.398-1.401,0L10,8.599l-6.3-6.3\nc-0.399-0.398-1-0.398-1.399,0c-0.401,0.4-0.401,1,0,1.4L8.6,10l-6.299,6.301c-0.401,0.398-0.401,1,0,1.398\nC2.5,17.901,2.801,18,3,18c0.301,0,0.5-0.099,0.7-0.301L10,11.4l6.302,6.299c0.199,0.202,0.5,0.301,0.699,0.301\nc0.301,0,0.5-0.099,0.7-0.301c0.398-0.398,0.398-1,0-1.398L11.4,10z"/></svg>',p='<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M18.1,19H1.9C1.403,19,1,18.498,1,18s0.403-1,0.9-1h16.2c0.498,0,0.9,0.502,0.9,1S18.598,19,18.1,19z"/><polygon fill="none" points="12.182,3.668 3.365,12.911 4.297,13.938 10.415,13.959 16.568,7.967 "/><path fill="#FFFFFF" d="M18.697,8.67C18.891,8.482,19,8.209,19,7.939c0-0.269-0.107-0.558-0.3-0.746l-5.843-5.785\nC12.67,1.225,12.419,1,12.157,1c-0.006,0-0.012,0-0.017,0c-0.268,0-0.522,0.24-0.707,0.434L1.276,12.207\nc-0.362,0.38-0.369,0.977-0.017,1.364l1.853,2.094C3.249,15.815,3.433,16,3.627,16h7.579c0.114,0,0.221-0.176,0.312-0.264\nL18.697,8.67z M4.297,13.938l-0.932-1.027l8.816-9.243l4.387,4.298l-6.153,5.992L4.297,13.938z"/><path fill="#FFFFFF" d="M3.849,16.004L10.817,16c0.001,0,0.002,0,0.003,0c0.134,0,0.265,0,0.386,0H3.627\nC3.701,16,3.772,16.003,3.849,16.004z"/></svg>',h='<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path display="inline" fill="#FFFFFF" d="M7,16.999c-0.3,0-0.5-0.1-0.7-0.299l-6-6c-0.398-0.4-0.398-1,0-1.4\nc0.4-0.398,1-0.398,1.4,0L7,14.601L18.3,3.3c0.4-0.398,1-0.398,1.4,0c0.399,0.4,0.399,1,0,1.4l-12,12\nC7.5,16.899,7.3,16.999,7,16.999z"/></svg>';function b(){var t=c(['\n      <div class="toolbox-controllers">\n        <div class="link list">\n          <input ref="name" class="name" type="text" placeholder="Link Name">\n          <input ref="url" class="url" type="text" placeholder="Link URL">\n        </div>\n        <div class="toolbox-buttons">\n          <button data-action="update" title="Update link">','</button>\n          <button data-action="follow" title="Follow link">','</button>\n          <button data-action="copy" title="Copy link">','</button>\n          <button data-action="clear" title="Clear styles">','</button>\n          <button data-action="close" title="Close toolbox">',"</button>\n        </div>\n      </div>\n    "]);return b=function(){return t},t}var F={"#":"h1","##":"h2","###":"h3","####":"h4","#####":"h5","######":"h6"},x=[{match:/^(#{1,6}) ([\s\S]+?)$/gm,format:function(t,n,e){return"<"+F[n]+' data-block="true" data-md="'+n+'">'+e+"</"+F[n]+">"}},{match:/^> ([\s\S]+?)$/gm,format:function(t,n){return'<blockquote data-block="true" data-md="quote">'+n.trim()+"</blockquote>"}},{match:/^--{2,}$/gm,format:function(t,n){return'<hr data-block="true" data-md="line"/>'}},{match:/^( *-) ([\s\S]+?)\n/gm,format:function(t,n,e){return n+" "+e.trim()+"\n"}},{match:/\*\*(.+?)\*\*/g,format:function(t,n){return'<strong data-md="bold">'+n.trim()+"</strong>"}},{match:/\*(.+?)\*/g,format:function(t,n){return'<em data-md="italic">'+n.trim()+"</em>"}},{match:/~~(.+?)~~/g,format:function(t,n){return'<s data-md="strike">'+n.trim()+"</s>"}},{match:/\^(.+?)\^/g,format:function(t,n){return'<sup data-md="upper">'+n.trim()+"</sup>"}},{match:/\[!\[(.+?)\]\((.+?)\)\]\((.+?)\)/gm,format:function(t,n,e,i){return'<figure data-md="img" data-block="true" data-noedit="true" data-link="'+i+'" data-click="showImageOptions"><img src="'+e+'" alt="'+n+'"/></figure>'}},{match:/!?\[(.*?)\]\((.*?)\)/gm,format:function(t,n,e){return 0===t.indexOf("!")?'<figure data-md="img" data-block="true" data-noedit="true" data-click="showImageOptions"><img src="'+e+'" alt="'+n+'"/></figure>':n===e&&e.includes("youtube.com")?'<figure data-md="embed" data-block="true" data-noedit="true"data-click="showEmbedOptions" data><img src="'+C(e)+'" alt="'+e+'"/></figure>':'<a href="'+e+'" data-md="link">'+n+"</a>"}},{match:/^(http[^\s]+)$/gm,format:function(t,n){return/\.(gif|png|jpe?g|svg|tiff)$/g.test(n)?'<figure data-md="img" data-block="true" data-noedit="true" data-click="showImageOptions"><img src="'+n+'" alt="figure"/></figure>':n.includes("youtube.com")?'<figure data-md="embed" data-block="true" data-noedit="true"data-click="showEmbedOptions" data><img src="'+C(n)+'" alt="'+n+'"/></figure>':'<a href="'+n+'" data-md="link">'+function(t){return t.length>37?t.slice(0,37)+"...":t}(n)+"</a>"}},{match:/\n/g,format:function(t,n){return'<br data-md="nl"/>'}}],w={"#":function(t){return"# "+t},"##":function(t){return"## "+t},"###":function(t){return"### "+t},"####":function(t){return"#### "+t},"#####":function(t){return"##### "+t},"######":function(t){return"###### "+t},bold:function(t){return"**"+t+"**"},italic:function(t){return"*"+t+"*"},strike:function(t){return"~~"+t+"~~"},upper:function(t){return"^"+t+"^"},quote:function(t){return"> "+t},line:function(t){return"---"},embed:function(t){return"["+t+"]("+t+")"},link:function(t,n){return"["+n+"]("+t+")"},img:function(t,n){return"!["+n+"]("+t+")"},imglink:function(t,n,e){return"[!["+n+"]("+t+")]("+e+")"}};function C(t){return"https://i3.ytimg.com/vi/"+new URLSearchParams(t.slice(t.indexOf("?")+1)).get("v")+"/maxresdefault.jpg"}function y(){var t=c(['\n      <div class="toolbox-controllers">\n        <div class="toolbox-basic">\n          <button class="','" data-action="headlines" title="Nagłówki">','</button>\n          <button class="','" data-action="bold" title="Bold">','</button>\n          <button class="','" data-action="italic" title="Italic">','</button>\n          <button class="','" data-action="strike" title="Strike through">','</button>\n          <button class="','" data-action="quote" title="Blockquote">','</button>\n          <button data-action="link" title="Create link">','</button>\n          <button data-action="clear" title="Clear styles">','</button>\n          <button data-action="close" title="Close toolbox">','</button>\n        </div>\n        <div ref="headlines" class="headlines">\n          <button class="','" data-action="#" title="Headline 1">','</button>\n          <button class="','" data-action="##" title="Headline 2">','</button>\n          <button class="','" data-action="###" title="Headline 3">','</button>\n          <button class="','" data-action="####" title="Headline 4">','</button>\n          <button class="','" data-action="#####" title="Headline 5">','</button>\n          <button class="','" data-action="######" title="Headline 6">',"</button>\n        </div>\n      </div>\n    "]);return y=function(){return t},t}function k(t,n){s(t.parentNode?t:null,n)}function S(){var t=c(['\n      <div class="toolbox-controllers">\n        <div class="link list">\n          <input ref="alt" class="name" type="text" placeholder="Image alt text">\n          <input ref="url" class="name" type="text" placeholder="Image URL">\n          <input ref="link" class="name" type="text" placeholder="External URL">\n        </div>\n        <div class="toolbox-buttons">\n          <button data-action="update" title="Update image">','</button>\n          <button data-action="copy" title="Copy link">',"</button>\n          ",'\n          <button data-action="close" title="Close toolbox">',"</button>\n        </div>\n      </div>\n    "]);return S=function(){return t},t}function M(){var t=c(['\n      <div class="toolbox-controllers">\n        <button data-action="follow" title="Open in YouTube">','</button>\n        <button data-action="close" title="Close toolbox">',"</button>\n      </div>\n    "]);return M=function(){return t},t}function L(t){return Array.from(t.childNodes).reduce(function(t,n){if(3===n.nodeType)t+=n.textContent;else if("BR"===n.nodeName)t+="\n";else if("FIGURE"===n.nodeName)t+="embed"===n.dataset.md?w.embed(n.firstElementChild.alt):n.dataset.link?w.imglink(n.firstElementChild.src,n.firstElementChild.alt,n.dataset.link):w.img(n.firstElementChild.src,n.firstElementChild.alt);else if("A"===n.nodeName)t+=w.link(n.href,L(n));else{var e=w[n.dataset.md];t+=e?e(L(n)):n.outerHTML}return t},"").replace(/\n\n\n/gm,"\n")}function N(t){return x.reduce(function(t,n){return t.replace(n.match,n.format)},t)}var z=function(){return window.getSelection().anchorNode},E=function(t){var n=window.getSelection().getRangeAt(0),e=n.cloneRange();e.selectNodeContents(t),e.setEnd(n.endContainer,n.endOffset);var i=e.toString().trim().length;return e.detach(),i},H=function(t){var n=document.createRange(),e=window.getSelection();return n.setStartAfter(t),n.setEndAfter(t),n.collapse(!0),e.removeAllRanges(),e.addRange(n),e},T=function(t){var n=document.createRange(),e=window.getSelection();return n.setStartBefore(t),n.setEndBefore(t),n.collapse(!0),e.removeAllRanges(),e.addRange(n),e},A=function(){var t=z();!function(t,n){var e=document.createRange(),i=window.getSelection();e.setStart(t,n),e.setEnd(t,n),e.collapse(!0),i.removeAllRanges(),i.addRange(e)}(t,E(t))},R=function(t){var n=z(),e=n.parentNode.dataset.block&&E(n)===n.textContent.length&&document.createTextNode("#");e&&n.parentNode.appendChild(e),t(),e&&e.remove()};export default function(t,n){var c;c=function(t){return void 0===t&&(t=""),'\n    *[data-miniedit]$NS:focus {\n      outline: none;\n    }\n\n    *[data-miniedit]$NS h1,\n    *[data-miniedit]$NS h2,\n    *[data-miniedit]$NS h3,\n    *[data-miniedit]$NS h4,\n    *[data-miniedit]$NS h5,\n    *[data-miniedit]$NS h6 {\n      display: inline-block;\n    }\n\n    *[data-miniedit]$NS h1[data-md="#"] {\n      font-weight: 600;\n      font-size: 1.8em;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS h2[data-md="##"] {\n      font-weight: 600;\n      font-size: 1.6em;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS h3[data-md="###"] {\n      font-weight: 600;\n      font-size: 1.4em;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS h4[data-md="####"] {\n      font-size: 1em;\n      margin: 0.5em 0;\n      font-weight: bold;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS blockquote[data-md="quote"] {\n      margin: 0;\n      width: 100%;\n      padding: 0.3em 1em;\n      display: inline-block;\n      background-color: #eee;\n    }\n\n    *[data-miniedit]$NS figure[data-md="img"],\n    *[data-miniedit]$NS figure[data-md="embed"] {\n      margin: 0;\n      overflow: hidden;\n      position: relative;\n      display: inline-block;\n    }\n\n    *[data-miniedit]$NS figure[data-md="embed"]::before {\n      top: 50%;\n      left: 50%;\n      width: 0;\n      height: 0;\n      content: "";\n      z-index: 10;\n      margin-left: 5px;\n      position: absolute;\n      border-top: 25px solid transparent;\n      border-bottom: 25px solid transparent;\n      border-left: 35px solid rgba(0,0,0,0.85);\n      transform: translateX(-50%) translateY(-50%);\n    }\n\n    *[data-miniedit]$NS figure[data-md="embed"]::after {\n      top: 50%;\n      left: 50%;\n      z-index: 10;\n      content: "";\n      width: 110px;\n      height: 110px;\n      position: absolute;\n      border-radius: 50%;\n      border: 10px solid rgba(0,0,0,0.85);\n      transform: translateX(-50%) translateY(-50%);\n    }\n\n    *[data-miniedit]$NS figure[data-md="img"] > *,\n    *[data-miniedit]$NS figure[data-md="embed"] > * {\n      pointer-events: none;\n    }\n\n    *[data-miniedit]$NS figure[data-md="img"] > img,\n    *[data-miniedit]$NS figure[data-md="embed"] > img {\n      height: auto;\n      display: block;\n      max-width: 100%;\n      margin: 1em auto;\n    }\n\n    *[data-miniedit]$NS a[data-md="link"] {\n      text-decoration:none;\n    }\n\n    *[data-miniedit]$NS a[data-md="link"]:hover {\n      text-decoration: underline;\n    }\n\n    *[data-miniedit]$NS hr[data-md="line"] {\n      width: 100%;\n      height: 1px;\n      border: none;\n      margin: 1.2em 0;\n      display: inline-block;\n      border-bottom: 1px solid #ccc;\n    }\n\n    /* TOOLBOX */\n\n    div[data-miniedit-toolbox] {\n      opacity: 0;\n      padding: 5px;\n      z-index: 3500;\n      font-size: 1rem;\n      position: fixed;\n      overflow: hidden;\n      visibility: hidden;\n      border-radius: 3px;\n      transform: translateZ(0);\n      background-image: linear-gradient(to bottom, rgba(49,49,47,.99), #262625);\n      transition: visibility 0s linear 0.3s, opacity .3s ease, top .4s ease, left .4s ease, transform .3s ease;\n    }\n\n    div[data-miniedit-toolbox].active {\n      opacity: 1;\n      visibility: visible;\n      transform: translateZ(0);\n      transition: opacity .3s ease, visibility 0s, top .4s ease, left .4s ease, transform .3s ease;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers .headlines {\n      display: none;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers .headlines.active {\n      display: block;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button {\n      width: 30px;\n      height: 30px;\n      border: none;\n      color: white;\n      cursor: pointer;\n      background: none;\n      font-weight: 500;\n      line-height: 2em;\n      font-size: 1.1rem;\n      position: relative;\n      display: inline-block;\n      transition: box-shadow .3s ease;\n      box-shadow: rgba(29, 100, 224, 0) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button > * {\n      pointer-events: none;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button:hover,\n    div[data-miniedit-toolbox] .toolbox-controllers button:focus {\n      outline: none;\n      box-shadow: rgb(29, 100, 224) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button.active::before {\n      top: 2px;\n      left: 2px;\n      right: 2px;\n      bottom: 2px;\n      content: "";\n      border-radius: 4px;\n      position: absolute;\n      background-color: rgba(0,0,0,0.2);\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button.active::after {\n      top: 3px;\n      right: 3px;\n      width: 5px;\n      height: 5px;\n      content: "";\n      border-radius: 50%;\n      position: absolute;\n      background-color: #dc3c09;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button.pressable:active {\n      transform: scale(0.8);\n    }\n\n    div[data-miniedit-toolbox] .toolbox-basic {\n      width: 280px;\n      display: flex;\n      justify-content: space-between;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-buttons {\n      display: flex;\n      justify-content: space-between;\n    }\n\n    div[data-miniedit-toolbox] .list {\n      display: flex;\n      flex-direction: column;\n    }\n\n    div[data-miniedit-toolbox] .justify-right {\n      display: flex;\n      width: 100%;\n      justify-content: flex-end;\n    }\n\n    div[data-miniedit-toolbox] .link input {\n      border: none;\n      padding: 3px;\n      color: white;\n      background: none;\n      transition: box-shadow .3s ease;\n      box-shadow: rgba(29, 100, 224, 0) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .link input:hover,\n    div[data-miniedit-toolbox] .link input:focus {\n      outline: none;\n      box-shadow: rgb(29, 100, 224) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .link input.url {\n      color: #337ab7;\n    }\n  '.replace(/\$NS/g,t)}(n),document.head.appendChild(document.createElement("style")).textContent=c;var w=!1,C=null,B=!1,$=t instanceof HTMLElement?t:document.querySelector(t);$.dataset.block="true",$.dataset.miniedit="🧱",$.setAttribute("contenteditable",!0),$.focus();var D,O,V,q=function(t){var n,i,a,c,d=(c={italic:a=function(t){var n=e(y(),t.dataset.md.includes("#")?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M13.667,2.813c-0.553,0-1,0.448-1,1v12.375c0,0.553,0.447,1,1,1s1-0.447,1-1V3.813\nC14.667,3.261,14.22,2.813,13.667,2.813z"/><path fill="#FFFFFF" d="M10.833,9.063h-3.5v-5.25c0-0.552-0.447-1-1-1s-1,0.448-1,1v12.375c0,0.553,0.447,1,1,1s1-0.447,1-1\nv-5.125h3.5c0.553,0,1-0.447,1-1C11.833,9.511,11.386,9.063,10.833,9.063z"/></svg>',"bold"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M5.919,17.25c-0.553,0-1-0.447-1-1V3.75c0-0.552,0.447-1,1-1s1,0.448,1,1v12.5\nC6.919,16.803,6.472,17.25,5.919,17.25z"/><path fill="#FFFFFF" d="M13.423,9.524c0.854-0.703,1.402-1.712,1.402-2.846c0-1.114-0.421-2.104-1.186-2.787\nc-0.984-0.881-2.44-1.221-4.351-1.008C8.74,2.944,8.345,3.439,8.406,3.988C8.469,4.536,8.959,4.936,9.511,4.87\nc1.29-0.144,2.259,0.033,2.795,0.513c0.429,0.383,0.519,0.917,0.519,1.296c0,1.013-0.979,1.837-2.18,1.837\nc-0.284,0-0.539,0.123-0.722,0.313C9.737,9.012,9.621,9.263,9.621,9.542c0,0.553,0.447,1,1,1c1.354,0,2.459,1.034,2.459,2.306\nc0,0.508-0.116,1.213-0.669,1.705c-0.604,0.536-1.653,0.734-3.025,0.568c-0.564-0.063-1.047,0.327-1.112,0.875\nc-0.064,0.548,0.326,1.046,0.875,1.111c0.397,0.048,0.777,0.072,1.141,0.072c1.446,0,2.604-0.379,3.45-1.131\nc0.864-0.768,1.342-1.904,1.342-3.199C15.082,11.503,14.427,10.314,13.423,9.524z"/></svg>',"italic"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M10,17.25c-0.553,0-1-0.447-1-1V3.75c0-0.552,0.447-1,1-1s1,0.448,1,1v12.5\nC11,16.803,10.553,17.25,10,17.25z"/></svg>',"strike"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M18.1,11.107H1.9c-0.497,0-0.9-0.447-0.9-1c0-0.552,0.403-1,0.9-1h16.2c0.498,0,0.9,0.448,0.9,1\nC19,10.66,18.598,11.107,18.1,11.107z"/><path fill="#FFFFFF" d="M14.966,2.641H8.282c-2.418,0-4.386,1.908-4.386,4.254c0,0.086,0.013,0.169,0.019,0.254\nC3.929,7.367,3.96,7.58,4.009,7.788C4.188,8.141,4.545,8.39,4.968,8.39c0.576,0,1.036-0.453,1.071-1.021\nC6.011,7.252,5.999,7.13,5.992,7.007C5.99,6.969,5.98,6.933,5.98,6.895c0-1.197,1.029-2.171,2.302-2.171h6.684\nc0.575,0,1.042-0.466,1.042-1.042C16.008,3.107,15.541,2.641,14.966,2.641z"/><path fill="#FFFFFF" d="M4.938,17.359h6.683c2.419,0,4.387-1.908,4.387-4.254c0-0.086-0.014-0.169-0.02-0.254\nc-0.014-0.219-0.045-0.432-0.094-0.639c-0.179-0.354-0.535-0.604-0.959-0.604c-0.576,0-1.036,0.453-1.07,1.021\nc0.027,0.117,0.039,0.238,0.047,0.362c0.002,0.038,0.012,0.073,0.012,0.112c0,1.197-1.029,2.171-2.303,2.171l-6.683-0.001\nc-0.575,0-1.042,0.466-1.042,1.042C3.896,16.893,4.363,17.359,4.938,17.359z"/></svg>',"quote"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M8.227,4.193C8.157,4.115,8.07,4.072,7.989,4.015C7.46,3.55,6.773,3.261,6.014,3.261\nC4.348,3.261,3,4.61,3,6.275C3,7.914,4.31,9.24,5.937,9.281c-0.293,0.375-0.64,0.752-1.097,1.131\nc-0.559,0.467-0.633,1.293-0.169,1.854c0.258,0.314,0.633,0.473,1.013,0.473c0.295,0,0.592-0.1,0.84-0.303\nc1.745-1.451,2.695-3.039,2.82-4.717C9.497,5.681,8.357,4.34,8.227,4.193z"/><path fill="#FFFFFF" d="M15.869,4.193c-0.069-0.078-0.157-0.122-0.238-0.178c-0.528-0.465-1.217-0.754-1.975-0.754\nc-1.666,0-3.014,1.349-3.014,3.014c0,1.638,1.309,2.965,2.937,3.006c-0.293,0.375-0.64,0.752-1.097,1.131\nc-0.559,0.467-0.633,1.293-0.17,1.854c0.259,0.314,0.634,0.473,1.014,0.473c0.297,0,0.592-0.1,0.84-0.303\nc1.745-1.451,2.695-3.039,2.82-4.717C17.139,5.682,16,4.341,15.869,4.193z"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M14.334,10.121c0,0.717-0.648,1.299-1.449,1.299H7.094c-0.799,0-1.447-0.582-1.447-1.299l0,0\nc0-0.717,0.646-1.299,1.447-1.299h5.791C13.686,8.822,14.334,9.404,14.334,10.121L14.334,10.121z"/><path fill="#FFFFFF" d="M8.574,14.646H4.833C1.942,14.646,0,12.778,0,10s1.942-4.646,4.833-4.646h3.741\nc0.569,0,1.029,0.462,1.029,1.032s-0.46,1.032-1.029,1.032H4.833c-0.834,0-2.775,0.252-2.775,2.581s1.941,2.581,2.775,2.581h3.741\nc0.569,0,1.029,0.462,1.029,1.032S9.144,14.646,8.574,14.646z"/><path fill="#FFFFFF" d="M11.426,5.354h3.74C18.057,5.354,20,7.222,20,10s-1.943,4.646-4.834,4.646h-3.74\nc-0.57,0-1.029-0.462-1.029-1.032s0.459-1.032,1.029-1.032h3.74c0.834,0,2.775-0.252,2.775-2.581S16,7.419,15.166,7.419h-3.74\nc-0.57,0-1.029-0.462-1.029-1.032S10.855,5.354,11.426,5.354z"/></svg>',p,g,"#"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M10.807,3.448c-0.525,0-0.95,0.425-0.95,0.949v11.75c0,0.525,0.426,0.948,0.95,0.948\nc0.524,0,0.95-0.425,0.95-0.948V4.398C11.757,3.874,11.33,3.448,10.807,3.448z"/><path fill="#FFFFFF" d="M8.116,9.382H4.793V4.398c0-0.525-0.426-0.952-0.951-0.952C3.318,3.445,2.893,3.872,2.893,4.398v11.75\nc0,0.523,0.426,0.949,0.949,0.949c0.525,0,0.951-0.426,0.951-0.949V11.28h3.323c0.524,0,0.948-0.425,0.948-0.95\nC9.064,9.807,8.64,9.382,8.116,9.382z"/><path fill="#FFFFFF" d="M14.278,9.83c0-0.256,0.104-0.45,0.312-0.583l1.463-1.117c0.098-0.083,0.21-0.123,0.337-0.123\nc0.181,0,0.346,0.05,0.495,0.148c0.147,0.099,0.223,0.226,0.223,0.373v8.06c0,0.157-0.079,0.28-0.241,0.373\nc-0.16,0.09-0.349,0.135-0.563,0.135c-0.223,0-0.415-0.047-0.57-0.135c-0.158-0.093-0.235-0.216-0.235-0.373V9.966l-0.396,0.396\nc-0.084,0.075-0.182,0.111-0.298,0.111c-0.149,0-0.273-0.066-0.373-0.199C14.329,10.143,14.278,9.995,14.278,9.83z"/></svg>',"##"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M9.854,3.228c-0.521,0-0.942,0.423-0.942,0.942v11.662c0,0.521,0.422,0.942,0.942,0.942\ns0.942-0.421,0.942-0.942V4.17C10.796,3.651,10.374,3.228,9.854,3.228z"/><path fill="#FFFFFF" d="M7.184,9.117H3.886V4.17c0-0.522-0.423-0.945-0.943-0.945S2,3.648,2,4.17v11.662\nc0,0.52,0.422,0.942,0.942,0.942s0.943-0.423,0.943-0.942v-4.83h3.298c0.52,0,0.942-0.423,0.942-0.942\nC8.126,9.538,7.704,9.117,7.184,9.117z"/><path fill="#FFFFFF" d="M12.522,16.268v-1.2c0-0.362,0.124-0.722,0.373-1.077c0.247-0.355,0.548-0.676,0.9-0.966l1.182-0.856\nc0.387-0.288,0.717-0.596,0.99-0.918c0.271-0.322,0.408-0.645,0.408-0.969c0-0.289-0.097-0.545-0.292-0.769\nc-0.192-0.221-0.479-0.334-0.858-0.334c-0.323,0-0.586,0.094-0.793,0.279s-0.309,0.464-0.309,0.836\nc0,0.159-0.076,0.303-0.225,0.423c-0.149,0.125-0.349,0.185-0.601,0.185c-0.476,0-0.714-0.288-0.714-0.863\nc0-0.671,0.26-1.219,0.781-1.637c0.523-0.418,1.139-0.627,1.847-0.627c0.747,0,1.396,0.224,1.942,0.673\nc0.547,0.447,0.82,1.043,0.82,1.786c0,0.495-0.133,0.961-0.399,1.394c-0.269,0.436-0.596,0.804-0.982,1.106\nc-0.386,0.3-0.771,0.579-1.154,0.837c-0.384,0.257-0.707,0.514-0.976,0.77c-0.268,0.256-0.402,0.502-0.402,0.732v0.299h3.433\nc0.131,0,0.249,0.066,0.352,0.201C17.948,15.709,18,15.871,18,16.059c0,0.189-0.051,0.355-0.15,0.5\nc-0.101,0.144-0.215,0.213-0.344,0.213h-4.294c-0.154,0-0.307-0.048-0.46-0.148C12.6,16.524,12.522,16.406,12.522,16.268z"/></svg>',"###"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M9.704,3.357c-0.51,0-0.924,0.415-0.924,0.925v11.438c0,0.512,0.414,0.924,0.924,0.924\nc0.511,0,0.924-0.412,0.924-0.924V4.282C10.627,3.772,10.214,3.357,9.704,3.357z"/><path fill="#FFFFFF" d="M7.084,9.134H3.85V4.282c0-0.512-0.415-0.927-0.925-0.927C2.414,3.355,2,3.771,2,4.282v11.438\nc0,0.509,0.414,0.924,0.924,0.924c0.51,0,0.925-0.415,0.925-0.924v-4.738h3.235c0.511,0,0.924-0.415,0.924-0.924\nC8.009,9.547,7.595,9.134,7.084,9.134z"/><path fill="#FFFFFF" d="M12.326,14.447c0-0.233,0.056-0.394,0.168-0.483c0.115-0.087,0.308-0.132,0.58-0.132\nc0.313,0,0.527,0.043,0.64,0.127c0.113,0.085,0.169,0.227,0.169,0.43c0,0.273,0.112,0.488,0.338,0.644\nc0.227,0.158,0.53,0.235,0.918,0.235c0.45,0,0.778-0.101,0.982-0.306c0.204-0.206,0.309-0.538,0.309-0.998v-0.229\nc0-0.764-0.442-1.146-1.328-1.146c-0.307,0-0.459-0.205-0.459-0.615c0-0.413,0.155-0.618,0.467-0.618\nc0.352,0,0.625-0.078,0.815-0.234c0.191-0.156,0.287-0.472,0.287-0.943c0-0.703-0.354-1.057-1.063-1.057\nc-0.717,0-1.074,0.27-1.074,0.807c0,0.4-0.25,0.599-0.748,0.599c-0.339,0-0.558-0.045-0.658-0.137\nc-0.102-0.092-0.15-0.271-0.15-0.535c0-0.233,0.043-0.467,0.131-0.695c0.088-0.231,0.228-0.455,0.418-0.675\nc0.188-0.217,0.465-0.396,0.826-0.53c0.362-0.137,0.785-0.207,1.268-0.207c1.706,0,2.56,0.724,2.56,2.169\nc0,0.479-0.083,0.9-0.25,1.257c-0.166,0.357-0.399,0.604-0.7,0.739C17.59,12.236,18,12.844,18,13.737v0.229\nc0,0.917-0.268,1.594-0.803,2.027s-1.234,0.65-2.095,0.65c-0.91,0-1.6-0.224-2.07-0.674\nC12.561,15.518,12.326,15.011,12.326,14.447z"/></svg>',"####"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M9.522,3.515c-0.498,0-0.902,0.405-0.902,0.902v11.169c0,0.499,0.404,0.902,0.902,0.902\nc0.499,0,0.903-0.403,0.903-0.902V4.417C10.425,3.92,10.021,3.515,9.522,3.515z"/><path fill="#FFFFFF" d="M6.965,9.154H3.807V4.417c0-0.5-0.405-0.905-0.904-0.905C2.404,3.512,2,3.917,2,4.417v11.169\nc0,0.497,0.404,0.902,0.902,0.902c0.499,0,0.904-0.405,0.904-0.902V10.96h3.158c0.499,0,0.902-0.405,0.902-0.902\nC7.867,9.558,7.464,9.154,6.965,9.154z"/><path fill="#FFFFFF" d="M12.084,14.02c0-0.101,0.027-0.202,0.08-0.304l2.795-5.447C15.084,8.004,15.3,7.87,15.608,7.87\nc0.156,0,0.322,0.058,0.5,0.17c0.177,0.115,0.265,0.256,0.265,0.42c0,0.055-0.019,0.124-0.058,0.2l-2.264,4.526h1.38v-1.296\nc0-0.166,0.073-0.29,0.223-0.378c0.149-0.087,0.329-0.129,0.544-0.129c0.211,0,0.391,0.042,0.541,0.129\nc0.149,0.088,0.223,0.212,0.223,0.378v1.296h0.555c0.15,0,0.268,0.066,0.354,0.2C17.957,13.521,18,13.68,18,13.863\nc0,0.173-0.048,0.325-0.146,0.461c-0.1,0.138-0.212,0.207-0.337,0.207h-0.555v1.45c0,0.156-0.073,0.281-0.223,0.371\nc-0.15,0.09-0.33,0.133-0.541,0.133c-0.205,0-0.385-0.043-0.537-0.133c-0.154-0.093-0.229-0.215-0.229-0.371v-1.45h-2.83\nc-0.147,0-0.271-0.046-0.37-0.141C12.132,14.299,12.084,14.174,12.084,14.02z"/></svg>',"#####"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M9.473,3.556c-0.495,0-0.896,0.402-0.896,0.897v11.094c0,0.495,0.401,0.896,0.896,0.896\ns0.896-0.401,0.896-0.896V4.453C10.368,3.958,9.967,3.556,9.473,3.556z"/><path fill="#FFFFFF" d="M6.932,9.159H3.794V4.453c0-0.497-0.402-0.899-0.898-0.899C2.401,3.554,2,3.956,2,4.453v11.094\nc0,0.495,0.401,0.896,0.896,0.896c0.496,0,0.898-0.401,0.898-0.896v-4.595h3.137c0.496,0,0.897-0.402,0.897-0.896\nC7.829,9.56,7.427,9.159,6.932,9.159z"/><path fill="#FFFFFF" d="M12.504,14.323c0-0.257,0.064-0.438,0.188-0.538c0.125-0.101,0.318-0.152,0.574-0.152\nc0.298,0,0.498,0.05,0.604,0.152c0.104,0.101,0.157,0.245,0.157,0.433c0,0.281,0.114,0.502,0.338,0.657\nc0.227,0.155,0.518,0.232,0.867,0.232c0.828,0,1.241-0.433,1.241-1.3v-0.221c0-0.439-0.106-0.766-0.319-0.983\nc-0.218-0.219-0.518-0.329-0.908-0.329h-1.731c-0.226,0-0.384-0.051-0.476-0.151c-0.09-0.101-0.135-0.246-0.135-0.441\nc0-0.031,0.014-0.08,0.041-0.146c0.025-0.066,0.041-0.117,0.041-0.156l0.236-3.085c0.023-0.32,0.121-0.48,0.292-0.48h3.605\nc0.142,0,0.253,0.066,0.333,0.199c0.082,0.135,0.123,0.291,0.123,0.469c0,0.181-0.041,0.336-0.123,0.469\nc-0.08,0.132-0.191,0.198-0.332,0.198h-2.623l-0.152,1.934h0.9c0.837,0,1.506,0.201,2.004,0.601\nc0.498,0.403,0.75,1.037,0.75,1.903v0.224c0,0.903-0.252,1.571-0.75,1.995c-0.498,0.425-1.16,0.641-1.979,0.641\nc-0.851,0-1.525-0.211-2.019-0.627C12.754,15.398,12.504,14.901,12.504,14.323z"/></svg>',"######"===t.dataset.md?"active":"",'<svg xmlns="http://www.w3.org/2000/svg" width="1em" viewBox="0 0 20 20"><path fill="#FFFFFF" d="M9.414,3.608c-0.492,0-0.89,0.399-0.89,0.889v11.006c0,0.492,0.398,0.891,0.89,0.891\nc0.49,0,0.889-0.398,0.889-0.891V4.498C10.302,4.007,9.903,3.608,9.414,3.608z"/><path fill="#FFFFFF" d="M6.893,9.167H3.78v-4.67c0-0.492-0.399-0.892-0.891-0.892S2,4.005,2,4.498v11.006\nc0,0.49,0.398,0.891,0.889,0.891s0.891-0.4,0.891-0.891v-4.558h3.113c0.491,0,0.89-0.399,0.89-0.89\nC7.782,9.564,7.384,9.167,6.893,9.167z"/><path fill="#FFFFFF" d="M12.553,13.734v-3.243c0-0.921,0.254-1.595,0.761-2.021c0.506-0.426,1.186-0.637,2.039-0.637\nc0.858,0,1.516,0.213,1.968,0.644C17.774,8.906,18,9.4,18,9.958c0,0.231-0.057,0.395-0.169,0.488\nc-0.112,0.093-0.293,0.139-0.54,0.139c-0.526,0-0.791-0.191-0.791-0.57c0-0.263-0.114-0.472-0.343-0.626\nc-0.228-0.154-0.508-0.233-0.843-0.233c-0.845,0-1.266,0.444-1.266,1.336v1.266c0.332-0.395,0.848-0.592,1.545-0.592\nc0.729,0,1.311,0.188,1.748,0.559c0.438,0.373,0.656,0.986,0.656,1.848v0.162c0,0.922-0.246,1.596-0.739,2.02\nc-0.491,0.428-1.151,0.641-1.98,0.641c-0.828,0-1.49-0.213-1.986-0.641C12.8,15.328,12.553,14.656,12.553,13.734z M14.051,13.852\nc0,0.904,0.411,1.357,1.231,1.357c0.805,0,1.208-0.453,1.208-1.357v-0.152c0-0.898-0.406-1.348-1.22-1.348s-1.22,0.412-1.22,1.24\nV13.852z"/></svg>'),i=n[1];return{element:n[0],command:function(n){switch(n){case"headlines":return i.headlines.classList.toggle("active"),!0;case"bold":return void k(t,'<strong data-md="bold">'+t.innerHTML+"</strong>");case"italic":return void k(t,'<em data-md="italic">'+t.innerHTML+"</em>");case"strike":return void k(t,'<s data-md="strike">'+t.innerHTML+"</s>");case"quote":return void k(t,'<blockquote data-block="true" data-md="quote">'+t.innerHTML+"</blockquote>");case"link":return a=Date.now(),k(t,'<a data-md="link" href="" data-tmpid="'+a+'">'+t.innerHTML+"</a>"),{target:document.querySelector('a[data-tmpid="'+a+'"]')};case"clear":return void(1===t.nodeType&&(t.parentNode?l(t):document.execCommand("insertHTML",!1,t.textContent)));default:k(t,"<"+F[e=n]+' data-md="'+e+'">'+t.innerHTML+"</"+F[e]+">")}var e,a}}},strong:a,strike:a,"#":a,"##":a,"###":a,"####":a,"#####":a,"######":a,quote:a,upper:a,line:a,link:function(t){var n=e(b(),h,f,v,p,g),i=n[0],a=n[1];return a.url.value=t.href,a.name.value=t.textContent,{element:i,command:function(n){switch(n){case"update":return void s(t,'<a href="'+a.url.value+'" data-md="link">'+a.name.value+"</a>");case"clear":return void(1===t.nodeType&&l(t));case"follow":return window.open(t.href,"_blank"),!0;case"copy":return a.url.select(),document.execCommand("copy"),a.url.blur(),!0}}}},img:function(t){var n=e(S(),h,v,t.dataset.link?'<button data-action="follow" title="Copy link"">'+f+"</button>":"",g),i=n[0],a=n[1];return a.url.value=t.firstElementChild.src,a.alt.value=t.firstElementChild.alt,t.dataset.link&&(a.link.value=t.dataset.link),{element:i,command:function(n){switch(n){case"update":return o(t),void document.execCommand("insertHTML",!1,'<figure data-md="img" data-block="true" data-noedit="true" '+(a.link.value?'data-link="'+a.link.value+'" ':"")+'data-click="showImageOptions"><img src="'+a.url.value+'" alt="'+a.alt.value+'"/></figure>');case"follow":return window.open(t.dataset.link,"_blank"),!0;case"copy":return a.url.select(),document.execCommand("copy"),a.url.blur(),!0}}}},embed:function(t){return{element:e(M(),f,g),command:function(n){switch(n){case"follow":window.open(t.firstElementChild.alt,"_blank")}}}}},{getEditor:function(t,n){return(c[t]||a)(n)}}),u=function(t,n){var e=t.match(/[\w-:]+=".+?"/g);e&&(e=e.map(function(t){return function(t,n){return[t.substring(0,n),t.substring(n+1)]}(t.replace(/"/g,""),t.indexOf("="))}));var i,a=~t.indexOf("[")?t.slice(0,t.indexOf("[")):t,o=~a.indexOf(".")?a.split("."):[a],r=o[0];if(o.length>0&&(o=o.slice(1,o.length).join(" ")),~r.indexOf("#")){var c=r.split("#");r=c[0],i=c[1]}var d=document.createElement(r);return i&&(d.id=i),e&&e.forEach(function(t){return d.setAttribute(t[0],t[1])}),o&&(d.className=o),d}('div[data-miniedit-toolbox="🧰"]');function m(){var t,e=d.getEditor(i.dataset.md,i);t=e,u.innerHTML="",u.appendChild(t.element),n=t;var a,o="selection"===(a=i).dataset.md?window.getSelection().getRangeAt(0).getBoundingClientRect():a.getBoundingClientRect(),r=o.x,c=o.width;u.style.top=o.y-u.offsetHeight-25+"px",u.style.left=(r+c)/2+e.element.offsetWidth/2+"px",u.classList.add("active"),window.addEventListener("scroll",x)}function x(t){u.contains(t.target)||(window.removeEventListener("scroll",x),u.classList.remove("active"),i=null)}function w(){u.classList.remove("active")}return t.parentNode.appendChild(u),u.addEventListener("click",function(t){if(t.target.dataset&&t.target.dataset.action){if("close"===t.target.dataset.action)return w();if(n){var e=n.command(t.target.dataset.action);if(e){if(!e.target)return;w(),i=e.target,m()}else w()}}}),Object.freeze({open:function(t){i=t,m()},close:function(){i=null,w()},selection:function(){var t=r();t.dataset.md="selection",i=t,m()}})}($),K=(D=function(){var t=z();R(function(){x.forEach(function(n){return function(t,n,e){var a;if(t)for(;a=n.exec(t.textContent);)i(t,a.index,n.lastIndex),document.execCommand("insertHTML",!1,e.apply(void 0,a))}(t,n.match,n.format)})})},function(){var t=arguments,n=function(){O=null,D.apply(void 0,[].slice.call(t))};clearTimeout(O),O=setTimeout(n,300)});return $.addEventListener("mousedown",function(t){t.altKey&&window.getSelection().toString().length&&(B=!0,q.selection(),t.preventDefault())}),$.addEventListener("click",function(t){if(C=null,!B){if(t.target.dataset.noedit)return t.preventDefault(),a(t.target),C=t.target,void(t.altKey&&q.open(t.target));if(t.altKey&&t.target.dataset&&t.target.dataset.md)return t.stopPropagation(),void q.open(t.target);q.close()}B=!1}),$.addEventListener("keydown",function(t){var n=window.getSelection().toString().length;if(!C||t.code.includes("Arrow")||t.ctrlKey||t.shiftKey||t.altKey||function(t){var n=document.createTextNode("\ufeff"),e=document.createTextNode("\ufeff");m(n,t),u(e,t),o(t),document.execCommand("delete")}(C),C=null,"Enter"===t.code){t.preventDefault();var e=z(),i=e.parentNode;return i.dataset.md&&(0===E(e)?T(i.previousSibling):H(i)),void document.execCommand("insertHTML",!1,'<br data-md="nl"/>&#8203;')}if(t.altKey&&"Space"===t.code){var r=z().parentNode;return window.getSelection().getRangeAt(0).selectNode(r),void document.execCommand("insertHTML",!1,r.outerHTML+" ")}if("Backspace"===t.code)return n>0?(t.preventDefault(),document.execCommand("delete"),void A()):void 0;if("Delete"===t.code){var c=z();return n>0?(t.preventDefault(),document.execCommand("delete"),void A()):void(E(c)===c.textContent.length&&c.nextElementSibling&&c.nextElementSibling.dataset.block&&(t.preventDefault(),function(t){var n=document.createRange(),e=window.getSelection();n.setStart(t,0),n.setEnd(t,0),e.removeAllRanges(),e.addRange(n)}(c.nextElementSibling)))}if("KeyZ"===t.code&&t.altKey)w=!0;else{if(t.altKey&&("KeyB"===t.code||"KeyI"===t.code)&&!t.shiftKey)return t.preventDefault();if("F2"===t.code)return console.log(L($));var d=z();d&&d.dataset&&d.dataset.noedit&&0===n&&(t.preventDefault(),a(d),"ArrowDown"===t.code||"ArrowRight"===t.code?d.nextSibling&&H(d.nextSibling):"ArrowUp"!==t.code&&"ArrowLeft"!==t.code||d.previousSibling&&T(d.previousSibling),C=d),w=!1,!(t.altKey||t.ctrlKey||t.shiftKey||t.code.includes("Arrow"))&&K()}}),$.addEventListener("drag",function(t){t.preventDefault()}),$.addEventListener("dragover",function(t){t.preventDefault()}),$.addEventListener("copy",function(t){t.preventDefault(),t.clipboardData.setData("text/plain",L(r()))}),$.addEventListener("cut",function(t){t.preventDefault(),t.clipboardData.setData("text/plain",L(r())),document.execCommand("delete")}),$.addEventListener("paste",function(t){t.preventDefault();var n=z();if(n===$||n.parentNode.dataset.block)R(function(){document.execCommand("insertHTML",!1,N(t.clipboardData.getData("text/plain")))});else{var e=document.createElement("div");e.innerHTML=N(t.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,e.textContent)}}),V=$,new MutationObserver(function(t,n){for(var e,i=function(t){var n=0;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,n){if(t){if("string"==typeof t)return d(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,void 0):void 0}}(t)))return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}(t);!(e=i()).done;){var a=e.value;"childList"===a.type&&a.addedNodes[0]&&(/^\u200B/g.test((o=a.addedNodes[0]).textContent)||/^\uFEFF/g.test(o.textContent)&&w)&&o.remove()}var o}).observe(V,{subtree:!0,childList:!0,characterData:!1}),Object.freeze({setText:function(t){$.innerHTML=N(t)},insertText:function(t){R(function(){document.execCommand("insertHTML",!1,N(t))})},getText:function(){return L($)},extend:function(t){}})}
