function t(){return(+new Date+100*Math.random()).toString(32)}function e(t){for(var e=[],n=-1,a=t.length;++n!==a;e[n]=t[n]);return e}function n(n){var a=arguments;if(!Array.isArray(n)||!n.raw)throw new Error("template helper should be called as tagged template string rather than function");var i={},o=n.reduce(function(n,o,d){var r,l=[].slice.call(a,1)[d];if(l instanceof NodeList&&(l=e(l)),l instanceof HTMLElement||Array.isArray(l)){var s=t();i[s]=l,r='<i id="'+s+'" class="_hook_"></i>'}else"string"!=typeof l&&"number"!=typeof l||(r=l);return"string"==typeof r||"number"==typeof r?n+(o+r):n+o},""),d=document.createElement("div");d.insertAdjacentHTML("beforeend",o);var r=e(d.querySelectorAll("[ref]")),l=r.reduce(function(t,e){return t[e.getAttribute("ref")]=e,e.removeAttribute("ref"),t},{});e(d.querySelectorAll("i._hook_")).forEach(function(t){var e=i[t.id],n=t.parentNode;Array.isArray(e)?(e.forEach(function(e){e instanceof HTMLElement&&n.insertBefore(e,t)}),t.remove()):n.replaceChild(e,t)});var s=1===d.children.length?d.children[0]:d;return r.length?[s,l]:s}const a=(t,e,n)=>{const a=document.createRange(),i=window.getSelection();return a.setStart(t,e),a.setEnd(t,n),i.removeAllRanges(),i.addRange(a),i},i=t=>{const e=window.getSelection(),n=e.getRangeAt(0);return n.selectNode(t),e.removeAllRanges(),e.addRange(n),e},o=t=>{if(3===t.nodeType)return;const e=window.getSelection(),n=e.getRangeAt(0),a=t.nextSibling&&t.nextSibling.textContent.length?1:0;return n.setStart(t.previousSibling,t.previousSibling&&t.previousSibling.textContent.length?t.previousSibling.textContent.length-1:0),n.setEnd(t.nextSibling,a),e.removeAllRanges(),e.addRange(n),e},d=(t="div")=>{const e=window.getSelection(),n=document.createElement(t);if(!e.isCollapsed){const t=e.getRangeAt(0);n.appendChild(t.cloneContents())}return n},r=t=>{const e=document.createTextNode("\ufeff"),n=document.createTextNode("\ufeff");c(e,t),s(n,t),o(t);const a=t.innerHTML.replace(/\uFEFF/g,"");document.execCommand("insertHTML",!1,a)},l=(t,e)=>{t&&i(t),document.execCommand("insertHTML",!1,e)},s=(t,e)=>{e.parentNode.insertBefore(t,e.nextSibling)},c=(t,e)=>{e.parentNode.insertBefore(t,e)};let m,u=t=>t;const f={"#":"h1","##":"h2","###":"h3","####":"h4","#####":"h5","######":"h6"},g=[{match:/^(#{1,6}) ([\s\S]+?)$/gm,format:(t,e,n)=>`<${f[e]} data-block="true" data-md="${e}">${n}</${f[e]}>`},{match:/^> ([\s\S]+?)$/gm,format:(t,e)=>`<blockquote data-block="true" data-md="quote">${e.trim()}</blockquote>`},{match:/^--{2,}$/gm,format:(t,e)=>'<hr data-block="true" data-md="line"/>'},{match:/^( *-) ([\s\S]+?)\n/gm,format:(t,e,n)=>`${e} ${n.trim()}\n`},{match:/\*\*(.+?)\*\*/g,format:(t,e)=>`<strong data-md="bold">${e.trim()}</strong>`},{match:/\*(.+?)\*/g,format:(t,e)=>`<em data-md="italic">${e.trim()}</em>`},{match:/~~(.+?)~~/g,format:(t,e)=>`<s data-md="strike">${e.trim()}</s>`},{match:/\^(.+?)\^/g,format:(t,e)=>`<sup data-md="upper">${e.trim()}</sup>`},{match:/\[!\[(.+?)\]\((.+?)\)\]\((.+?)\)/gm,format:(t,e,n,a)=>`<figure data-md="img" data-block="true" data-noedit="true" data-link="${a}" data-click="showImageOptions"><img src="${n}" alt="${e}"/></figure>`},{match:/!?\[(.*?)\]\((.*?)\)/gm,format:(t,e,n)=>0===t.indexOf("!")?`<figure data-md="img" data-block="true" data-noedit="true" data-click="showImageOptions"><img src="${n}" alt="${e}"/></figure>`:`<a href="${n}" data-md="link">${e}</a>`},{match:/^(http[^\s]+)$/gm,format:(t,e)=>/\.(gif|png|jpe?g|svg|tiff)$/g.test(e)?`<figure data-md="img" data-block="true" data-noedit="true" data-click="showImageOptions"><img src="${e}" alt="figure"/></figure>`:e.includes("youtube.com")?`<figure data-md="embed" data-block="true" data-noedit="true"data-click="showEmbedOptions" data><img src="${function(t){return`https://i3.ytimg.com/vi/${new URLSearchParams(t.slice(t.indexOf("?")+1)).get("v")}/maxresdefault.jpg`}(e)}" alt="${e}"/></figure>`:`<a href="${e}" data-md="link">${function(t){return t.length>37?t.slice(0,37)+"...":t}(e)}</a>`},{match:/\n/gm,format:(t,e)=>'<br data-md="nl"/>'}],b={"#":t=>"# "+t,"##":t=>"## "+t,"###":t=>"### "+t,"####":t=>"#### "+t,"#####":t=>"##### "+t,"######":t=>"###### "+t,bold:t=>`**${t}**`,italic:t=>`*${t}*`,strike:t=>`~~${t}~~`,upper:t=>`^${t}^`,quote:t=>"> "+t,line:t=>"---",embed:t=>`[${t}](${t})`,link:(t,e)=>`[${e}](${t})`,img:(t,e)=>`![${e}](${t})`,imglink:(t,e,n)=>`[![${e}](${t})](${n})`};let p,h=t=>t;function v(t,e){l(t.parentNode?t:null,e)}let x,k,w=t=>t,$=t=>t;function y(t){return Array.from(t.childNodes).reduce((t,e)=>{if(3===e.nodeType)t+=e.textContent;else if("BR"===e.nodeName)t+="\n";else if("FIGURE"===e.nodeName)t+="embed"===e.dataset.md?b.embed(e.firstElementChild.alt):e.dataset.link?b.imglink(e.firstElementChild.src,e.firstElementChild.alt,e.dataset.link):b.img(e.firstElementChild.src,e.firstElementChild.alt);else if("A"===e.nodeName)t+=b.link(e.href,y(e));else{const n=b[e.dataset.md];t+=n?n(y(e)):e.textContent}return t},"")}function S(t){return g.reduce((t,e)=>t.replace(e.match,e.format),t)}const C=()=>window.getSelection().anchorNode,N=t=>{const e=window.getSelection().getRangeAt(0),n=e.cloneRange();n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset);const a=n.toString().trim().length;return n.detach(),a},L=t=>{const e=document.createRange(),n=window.getSelection();return e.setStartAfter(t),e.setEndAfter(t),e.collapse(!0),n.removeAllRanges(),n.addRange(e),n},E=t=>{const e=document.createRange(),n=window.getSelection();return e.setStartBefore(t),e.setEndBefore(t),e.collapse(!0),n.removeAllRanges(),n.addRange(e),n},T=()=>{const t=C();((t,e)=>{const n=document.createRange(),a=window.getSelection();n.setStart(t,e),n.setEnd(t,e),n.collapse(!0),a.removeAllRanges(),a.addRange(n)})(t,N(t))},H=t=>{const e=C(),n=e.parentNode.dataset.block&&N(e)===e.textContent.length&&document.createTextNode("#");n&&e.parentNode.appendChild(n),t(),n&&n.remove()};export default function(t,e){var b;b=function(t=""){return'\n    *[data-miniedit]$NS:focus {\n      outline: none;\n    }\n\n    *[data-miniedit]$NS h1,\n    *[data-miniedit]$NS h2,\n    *[data-miniedit]$NS h3,\n    *[data-miniedit]$NS h4,\n    *[data-miniedit]$NS h5,\n    *[data-miniedit]$NS h6 {\n      display: inline-block;\n    }\n\n    *[data-miniedit]$NS h1[data-md="#"] {\n      font-weight: 600;\n      font-size: 1.8em;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS h2[data-md="##"] {\n      font-weight: 600;\n      font-size: 1.6em;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS h3[data-md="###"] {\n      font-weight: 600;\n      font-size: 1.4em;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS h4[data-md="####"] {\n      font-size: 1em;\n      margin: 0.5em 0;\n      font-weight: bold;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS blockquote[data-md="quote"] {\n      margin: 0;\n      width: 100%;\n      padding: 0.3em 1em;\n      display: inline-block;\n      background-color: #eee;\n    }\n\n    *[data-miniedit]$NS figure[data-md="img"],\n    *[data-miniedit]$NS figure[data-md="embed"] {\n      margin: 0;\n      overflow: hidden;\n      position: relative;\n      display: inline-block;\n    }\n\n    *[data-miniedit]$NS figure[data-md="embed"]::before {\n      top: 50%;\n      left: 50%;\n      width: 0;\n      height: 0;\n      content: "";\n      z-index: 10;\n      margin-left: 5px;\n      position: absolute;\n      border-top: 25px solid transparent;\n      border-bottom: 25px solid transparent;\n      border-left: 35px solid rgba(0,0,0,0.85);\n      transform: translateX(-50%) translateY(-50%);\n    }\n\n    *[data-miniedit]$NS figure[data-md="embed"]::after {\n      top: 50%;\n      left: 50%;\n      z-index: 10;\n      content: "";\n      width: 110px;\n      height: 110px;\n      position: absolute;\n      border-radius: 50%;\n      border: 10px solid rgba(0,0,0,0.85);\n      transform: translateX(-50%) translateY(-50%);\n    }\n\n    *[data-miniedit]$NS figure[data-md="img"] > *,\n    *[data-miniedit]$NS figure[data-md="embed"] > * {\n      pointer-events: none;\n    }\n\n    *[data-miniedit]$NS figure[data-md="img"] > img,\n    *[data-miniedit]$NS figure[data-md="embed"] > img {\n      height: auto;\n      display: block;\n      max-width: 100%;\n      margin: 1em auto;\n    }\n\n    *[data-miniedit]$NS a[data-md="link"] {\n      text-decoration:none;\n    }\n\n    *[data-miniedit]$NS a[data-md="link"]:hover {\n      text-decoration: underline;\n    }\n\n    *[data-miniedit]$NS hr[data-md="line"] {\n      width: 100%;\n      height: 1px;\n      border: none;\n      margin: 1.2em 0;\n      display: inline-block;\n      border-bottom: 1px solid #ccc;\n    }\n\n    /* TOOLBOX */\n\n    div[data-miniedit-toolbox] {\n      opacity: 0;\n      padding: 5px;\n      z-index: 3500;\n      position: fixed;\n      overflow: hidden;\n      visibility: hidden;\n      border-radius: 3px;\n      transform: translateZ(0);\n      background-image: linear-gradient(to bottom, rgba(49,49,47,.99), #262625);\n      transition: visibility 0s linear 0.3s, opacity .3s ease, top .4s ease, left .4s ease, transform .3s ease;\n    }\n\n    div[data-miniedit-toolbox].active {\n      opacity: 1;\n      visibility: visible;\n      transform: translateZ(0);\n      transition: opacity .3s ease, visibility 0s, top .4s ease, left .4s ease, transform .3s ease;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers .headlines {\n      display: none;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers .headlines.active {\n      display: block;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button {\n      width: 30px;\n      height: 30px;\n      border: none;\n      color: white;\n      background: none;\n      font-weight: 500;\n      position: relative;\n      display: inline-block;\n      transition: box-shadow .3s ease;\n      box-shadow: rgba(29, 100, 224, 0) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button > * {\n      pointer-events: none;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button:hover,\n    div[data-miniedit-toolbox] .toolbox-controllers button:focus {\n      outline: none;\n      box-shadow: rgb(29, 100, 224) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button.active::before {\n      top: 2px;\n      left: 2px;\n      right: 2px;\n      bottom: 2px;\n      content: "";\n      border-radius: 4px;\n      position: absolute;\n      background-color: rgba(0,0,0,0.2);\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button.active::after {\n      top: 3px;\n      right: 3px;\n      width: 5px;\n      height: 5px;\n      content: "";\n      border-radius: 50%;\n      position: absolute;\n      background-color: #dc3c09;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button.pressable:active {\n      transform: scale(0.8);\n    }\n\n    div[data-miniedit-toolbox] .list {\n      display: flex;\n      flex-direction: column;\n    }\n\n    div[data-miniedit-toolbox] .justify-right {\n      display: flex;\n      width: 100%;\n      justify-content: flex-end;\n    }\n\n    div[data-miniedit-toolbox] .link input {\n      border: none;\n      padding: 3px;\n      color: white;\n      background: none;\n      transition: box-shadow .3s ease;\n      box-shadow: rgba(29, 100, 224, 0) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .link input:hover,\n    div[data-miniedit-toolbox] .link input:focus {\n      outline: none;\n      box-shadow: rgb(29, 100, 224) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .link input.url {\n      color: #337ab7;\n    }\n  '.replace(/\$NS/g,t)}(e),document.head.appendChild(document.createElement("style")).textContent=b;let A=!1,R=null,M=!1,D=t instanceof HTMLElement?t:document.querySelector(t);D.dataset.block="true",D.dataset.miniedit="🧱",D.setAttribute("contenteditable",!0),D.focus();const O=function(t){let e,a;const i=function(){const t=t=>{const[e,a]=n(p||(p=h`
      <div class="toolbox-controllers">
        <div>
          <button class="${0}" data-action="headlines" title="Nagłówki">H</button>
          <button class="${0}" data-action="bold" title="Bold">B</button>
          <button class="${0}" data-action="italic" title="Italic">I</button>
          <button class="${0}" data-action="strike" title="Strike through">S</button>
          <button class="${0}" data-action="quote" title="Blockquote">‟</button>
          <button data-action="link" title="Create link">↸</button>
          <button data-action="clear" title="Clear styles">※</button>
          <button data-action="close" title="Close toolbox">✖</button>
        </div>
        <div ref="headlines" class="headlines">
          <button class="${0}" data-action="#" title="Headline 1">H1</button>
          <button class="${0}" data-action="##" title="Headline 2">H2</button>
          <button class="${0}" data-action="###" title="Headline 3">H3</button>
          <button class="${0}" data-action="####" title="Headline 4">H4</button>
          <button class="${0}" data-action="#####" title="Headline 5">H5</button>
          <button class="${0}" data-action="######" title="Headline 6">H6</button>
        </div>
      </div>
    `),t.dataset.md.includes("#")?"active":"","bold"===t.dataset.md?"active":"","italic"===t.dataset.md?"active":"","strike"===t.dataset.md?"active":"","quote"===t.dataset.md?"active":"","#"===t.dataset.md?"active":"","##"===t.dataset.md?"active":"","###"===t.dataset.md?"active":"","####"===t.dataset.md?"active":"","#####"===t.dataset.md?"active":"","######"===t.dataset.md?"active":"");return{element:e,command:e=>{switch(e){case"headlines":return a.headlines.classList.toggle("active"),!0;case"bold":v(t,`<strong data-md="bold">${t.innerHTML}</strong>`);break;case"italic":v(t,`<em data-md="italic">${t.innerHTML}</em>`);break;case"strike":v(t,`<s data-md="strike">${t.innerHTML}</s>`);break;case"quote":v(t,`<blockquote data-block="true" data-md="quote">${t.innerHTML}</blockquote>`);break;case"link":v(t,`<a data-md="link" href="">${t.innerHTML}</a>`);break;case"clear":1===t.nodeType&&(t.parentNode?r(t):document.execCommand("insertHTML",!1,t.textContent));break;default:v(t,`<${f[n=e]} data-md="${n}">${t.innerHTML}</${f[n]}>`)}var n}}},e={italic:t,strong:t,strike:t,"#":t,"##":t,"###":t,"####":t,"#####":t,"######":t,quote:t,upper:t,line:t,link:t=>{const[e,a]=n(m||(m=u`
      <div class="toolbox-controllers">
        <div class="link list">
          <input ref="name" class="name" type="text" placeholder="Link Name">
          <input ref="url" class="url" type="text" placeholder="Link URL">
        </div>
        <div>
          <button data-action="update" title="Update link">
            <i class="fa fa-check">✔</i>
          </button>
          <button data-action="follow" title="Follow link"">
            <i class="fa fa-send">↗</i>
          </button>
          <button data-action="copy" title="Copy link">
            <i class="fa fa-clipboard">❐</i>
          </button>
          <button data-action="clear" title="Clear styles">
            <i class="fa fa-eraser">※</i>
          </button>
          <button data-action="close" title="Close toolbox">
            <i class="fa fa-times">✖</i>
          </button>
        </div>
      </div>
    `));return a.url.value=t.href,a.name.value=t.textContent,{element:e,command:e=>{switch(e){case"update":return void l(t,`<a href="${a.url.value}" data-md="link">${a.name.value}</a>`);case"clear":return void(1===t.nodeType&&r(t));case"follow":return window.open(t.href,"_blank"),!0;case"copy":return a.url.select(),document.execCommand("copy"),a.url.blur(),!0}}}},img:t=>{const[e,a]=n(x||(x=w`
      <div class="toolbox-controllers">
        <div class="link list">
          <input ref="alt" class="name" type="text" placeholder="Image alt text">
          <input ref="url" class="name" type="text" placeholder="Image URL">
          <input ref="link" class="name" type="text" placeholder="External URL">
        </div>
        <div>
          <button data-action="update" title="Update image">
            <i class="fa fa-check">✔</i>
          </button>
          <button data-action="copy" title="Copy link"">
            <i class="fa fa-clipboard">❐</i>
          </button>
          <button data-action="close" title="Close toolbox">
            <i class="fa fa-times">✖</i>
          </button>
        </div>
      </div>
    `));return a.url.value=t.firstElementChild.src,a.alt.value=t.firstElementChild.alt,t.dataset.link&&(a.link.value=t.dataset.link),{element:e,command:e=>{switch(e){case"update":return o(t),void document.execCommand("insertHTML",!1,`<figure data-md="img" data-block="true" data-noedit="true" ${a.link.value?`data-link="${a.link.value}" `:""}data-click="showImageOptions"><img src="${a.url.value}" alt="${a.alt.value}"/></figure>`);case"copy":return a.url.select(),document.execCommand("copy"),a.url.blur(),!0}}}},embed:t=>({element:n(k||(k=$`
      <div class="toolbox-controllers">
        <button data-action="follow" title="Open in YouTube">
          <i class="fa fa-eraser">↗</i>
        </button>
        <button data-action="close" title="Close toolbox">
          <i class="fa fa-times">✖</i>
        </button>
      </div>
    `)),command:e=>{switch(e){case"follow":window.open(t.firstElementChild.alt,"_blank")}}})};return{getEditor:(n,a)=>(e[n]||t)(a)}}(),s=function(t,e){var n=t.match(/[\w-:]+=".+?"/g);n&&(n=n.map(function(t){return function(t,e){return[t.substring(0,e),t.substring(e+1)]}(t.replace(/"/g,""),t.indexOf("="))}));var a,i=~t.indexOf("[")?t.slice(0,t.indexOf("[")):t,o=~i.indexOf(".")?i.split("."):[i],d=o[0];if(o.length>0&&(o=o.slice(1,o.length).join(" ")),~d.indexOf("#")){var r=d.split("#");d=r[0],a=r[1]}var l=document.createElement(d);return a&&(l.id=a),n&&n.forEach(function(t){return l.setAttribute(t[0],t[1])}),o&&(l.className=o),l}('div[data-miniedit-toolbox="🧰"]');function c(){const t=i.getEditor(a.dataset.md,a);var n;n=t,s.innerHTML="",s.appendChild(n.element),e=n;const{x:o,y:d,width:r}="selection"===(l=a).dataset.md?window.getSelection().getRangeAt(0).getBoundingClientRect():l.getBoundingClientRect();var l;s.style.top=d-s.offsetHeight-25+"px",s.style.left=(o+r)/2+t.element.offsetWidth/2+"px",s.classList.add("active"),window.addEventListener("scroll",g)}function g(t){s.contains(t.target)||(window.removeEventListener("scroll",g),s.classList.remove("active"),a=null)}function b(){s.classList.remove("active")}return t.parentNode.appendChild(s),s.addEventListener("click",t=>{if(t.target.dataset&&t.target.dataset.action)return"close"===t.target.dataset.action?b():void(e&&!e.command(t.target.dataset.action)&&b())}),Object.freeze({open(t){a=t,c()},close(){a=null,b()},selection(){const t=d();t.dataset.md="selection",a=t,c()}})}(D),q=((t,e)=>{let n;return(...e)=>{clearTimeout(n),n=setTimeout(()=>{n=null,t.apply(void 0,e)},300)}})(()=>{const t=C();H(()=>{g.forEach(e=>((t,e,n)=>{let i;if(t)for(;i=e.exec(t.textContent);)a(t,i.index,e.lastIndex),document.execCommand("insertHTML",!1,n(...i))})(t,e.match,e.format))})});var K,B;return D.addEventListener("mousedown",t=>{(t.ctrlKey||t.metaKey)&&window.getSelection().toString().length&&(M=!0,t.preventDefault(),O.selection())}),D.addEventListener("click",t=>{if(R=null,!M){if(t.target.dataset.noedit)return t.preventDefault(),i(t.target),R=t.target,void((t.ctrlKey||t.metaKey)&&O.open(t.target));if(t.target.dataset&&t.target.dataset.md&&(t.ctrlKey||t.metaKey))return t.stopPropagation(),void O.open(t.target);O.close()}M=!1}),D.addEventListener("keydown",t=>{if(!R||t.code.includes("Arrow")||t.ctrlKey||t.metaKey||(t=>{const e=document.createTextNode("\ufeff"),n=document.createTextNode("\ufeff");c(e,t),s(n,t),o(t),document.execCommand("delete")})(R),R=null,"Enter"===t.code){t.preventDefault();const e=C(),n=e.parentNode;return n.dataset.md&&(0===N(e)?E(n.previousSibling):L(n)),void document.execCommand("insertHTML",!1,'<br data-md="nl"/>&#8203;')}if((t.ctrlKey||t.metaKey)&&"Space"===t.code){const t=C().parentNode;return window.getSelection().getRangeAt(0).selectNode(t),void document.execCommand("insertHTML",!1,t.outerHTML+" ")}if("Backspace"===t.code)return window.getSelection().toString().length>0?(t.preventDefault(),document.execCommand("delete"),void T()):void 0;if("Delete"===t.code){const e=C();return window.getSelection().toString().length>0?(t.preventDefault(),document.execCommand("delete"),void T()):void(N(e)===e.textContent.length&&e.nextElementSibling&&e.nextElementSibling.dataset.block&&(t.preventDefault(),(t=>{const e=document.createRange(),n=window.getSelection();e.setStart(t,0),e.setEnd(t,0),n.removeAllRanges(),n.addRange(e)})(e.nextElementSibling)))}if("KeyZ"===t.code&&(t.ctrlKey||t.metaKey))return void(A=!0);if((t.ctrlKey||t.metaKey)&&("KeyB"===t.code||"KeyI"===t.code))return t.preventDefault();if("F2"===t.code)return console.log(y(D));if("F4"===t.code){const t=C();return void H(()=>{r(t.parentNode)})}const e=C();e.dataset&&e.dataset.noedit&&(t.preventDefault(),"ArrowDown"===t.code||"ArrowRight"===t.code?L(e.nextSibling):"ArrowUp"!==t.code&&"ArrowLeft"!==t.code||E(e.previousSibling),i(e),R=e),A=!1,q()}),D.addEventListener("drag",t=>{t.preventDefault()}),D.addEventListener("dragover",t=>{t.preventDefault()}),D.addEventListener("copy",t=>{t.preventDefault(),t.clipboardData.setData("text/plain",y(d()))}),D.addEventListener("cut",t=>{t.preventDefault(),t.clipboardData.setData("text/plain",y(d())),document.execCommand("delete")}),D.addEventListener("paste",t=>{t.preventDefault();const e=C();if(e===D||e.parentNode.dataset.block)H(()=>{document.execCommand("insertHTML",!1,S(t.clipboardData.getData("text/plain")))});else{const e=document.createElement("div");e.innerHTML=S(t.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,e.textContent)}}),K=D,B=t=>{(/^\u200B/g.test(t.textContent)||/^\uFEFF/g.test(t.textContent)&&A)&&t.remove()},new MutationObserver((t,e)=>{for(let e of t)"childList"===e.type&&e.addedNodes[0]&&B(e.addedNodes[0])}).observe(K,{subtree:!0,childList:!0,characterData:!1}),Object.freeze({setText:t=>{D.innerHTML=S(t)},insertText:t=>{H(()=>{document.execCommand("insertHTML",!1,S(t))})},getText:()=>y(D)})}
