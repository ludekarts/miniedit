function t(){return(+new Date+100*Math.random()).toString(32)}function e(t){for(var e=[],n=-1,a=t.length;++n!==a;e[n]=t[n]);return e}function n(n){var a=arguments;if(!Array.isArray(n)||!n.raw)throw new Error("template helper should be called as tagged template string rather than function");var i={},o=n.reduce(function(n,o,r){var d,l=[].slice.call(a,1)[r];if(l instanceof NodeList&&(l=e(l)),l instanceof HTMLElement||Array.isArray(l)){var c=t();i[c]=l,d='<i id="'+c+'" class="_hook_"></i>'}else"string"!=typeof l&&"number"!=typeof l||(d=l);return"string"==typeof d||"number"==typeof d?n+(o+d):n+o},""),r=document.createElement("div");r.insertAdjacentHTML("beforeend",o);var d=e(r.querySelectorAll("[ref]")),l=d.reduce(function(t,e){return t[e.getAttribute("ref")]=e,e.removeAttribute("ref"),t},{});e(r.querySelectorAll("i._hook_")).forEach(function(t){var e=i[t.id],n=t.parentNode;Array.isArray(e)?(e.forEach(function(e){e instanceof HTMLElement&&n.insertBefore(e,t)}),t.remove()):n.replaceChild(e,t)});var c=1===r.children.length?r.children[0]:r;return d.length?[c,l]:c}var a=function(t,e,n){var a=document.createRange(),i=window.getSelection();return a.setStart(t,e),a.setEnd(t,n),i.removeAllRanges(),i.addRange(a),i},i=function(t){var e=window.getSelection(),n=e.getRangeAt(0);return n.selectNode(t),e.removeAllRanges(),e.addRange(n),e},o=function(t){if(3!==t.nodeType){var e=window.getSelection(),n=e.getRangeAt(0),a=t.nextSibling&&t.nextSibling.textContent.length?1:0;return n.setStart(t.previousSibling,t.previousSibling&&t.previousSibling.textContent.length?t.previousSibling.textContent.length-1:0),n.setEnd(t.nextSibling,a),e.removeAllRanges(),e.addRange(n),e}},r=function(t){void 0===t&&(t="div");var e=window.getSelection(),n=document.createElement(t);if(!e.isCollapsed){var a=e.getRangeAt(0);n.appendChild(a.cloneContents())}return n};function d(t,e){return e||(e=t.slice(0)),t.raw=e,t}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var c=function(t){var e=document.createTextNode("\ufeff"),n=document.createTextNode("\ufeff");m(e,t),s(n,t),o(t);var a=t.innerHTML.replace(/\uFEFF/g,"");document.execCommand("insertHTML",!1,a)},u=function(t,e){t&&i(t),document.execCommand("insertHTML",!1,e)},s=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},m=function(t,e){e.parentNode.insertBefore(t,e)};function f(){var t=d(['\n      <div class="toolbox-controllers">\n        <div class="link list">\n          <input ref="name" class="name" type="text" placeholder="Link Name">\n          <input ref="url" class="url" type="text" placeholder="Link URL">\n        </div>\n        <div>\n          <button data-action="update" title="Update link">\n            <i class="fa fa-check">✔</i>\n          </button>\n          <button data-action="follow" title="Follow link"">\n            <i class="fa fa-send">↗</i>\n          </button>\n          <button data-action="copy" title="Copy link">\n            <i class="fa fa-clipboard">❐</i>\n          </button>\n          <button data-action="clear" title="Clear styles">\n            <i class="fa fa-eraser">※</i>\n          </button>\n          <button data-action="close" title="Close toolbox">\n            <i class="fa fa-times">✖</i>\n          </button>\n        </div>\n      </div>\n    ']);return f=function(){return t},t}var g={"#":"h1","##":"h2","###":"h3","####":"h4","#####":"h5","######":"h6"},b=[{match:/^(#{1,6}) ([\s\S]+?)$/gm,format:function(t,e,n){return"<"+g[e]+' data-block="true" data-md="'+e+'">'+n+"</"+g[e]+">"}},{match:/^> ([\s\S]+?)$/gm,format:function(t,e){return'<blockquote data-block="true" data-md="quote">'+e.trim()+"</blockquote>"}},{match:/^--{2,}$/gm,format:function(t,e){return'<hr data-block="true" data-md="line"/>'}},{match:/^( *-) ([\s\S]+?)\n/gm,format:function(t,e,n){return e+" "+n.trim()+"\n"}},{match:/\*\*(.+?)\*\*/g,format:function(t,e){return'<strong data-md="bold">'+e.trim()+"</strong>"}},{match:/\*(.+?)\*/g,format:function(t,e){return'<em data-md="italic">'+e.trim()+"</em>"}},{match:/~~(.+?)~~/g,format:function(t,e){return'<s data-md="strike">'+e.trim()+"</s>"}},{match:/\^(.+?)\^/g,format:function(t,e){return'<sup data-md="upper">'+e.trim()+"</sup>"}},{match:/\[!\[(.+?)\]\((.+?)\)\]\((.+?)\)/gm,format:function(t,e,n,a){return'<figure data-md="img" data-block="true" data-noedit="true" data-link="'+a+'" data-click="showImageOptions"><img src="'+n+'" alt="'+e+'"/></figure>'}},{match:/!?\[(.*?)\]\((.*?)\)/gm,format:function(t,e,n){return 0===t.indexOf("!")?'<figure data-md="img" data-block="true" data-noedit="true" data-click="showImageOptions"><img src="'+n+'" alt="'+e+'"/></figure>':'<a href="'+n+'" data-md="link">'+e+"</a>"}},{match:/^(http[^\s]+)$/gm,format:function(t,e){return/\.(gif|png|jpe?g|svg|tiff)$/g.test(e)?'<figure data-md="img" data-block="true" data-noedit="true" data-click="showImageOptions"><img src="'+e+'" alt="figure"/></figure>':e.includes("youtube.com")?'<figure data-md="embed" data-block="true" data-noedit="true"data-click="showEmbedOptions" data><img src="'+function(t){return"https://i3.ytimg.com/vi/"+new URLSearchParams(t.slice(t.indexOf("?")+1)).get("v")+"/maxresdefault.jpg"}(e)+'" alt="'+e+'"/></figure>':'<a href="'+e+'" data-md="link">'+function(t){return t.length>37?t.slice(0,37)+"...":t}(e)+"</a>"}},{match:/\n/gm,format:function(t,e){return'<br data-md="nl"/>'}}],p={"#":function(t){return"# "+t},"##":function(t){return"## "+t},"###":function(t){return"### "+t},"####":function(t){return"#### "+t},"#####":function(t){return"##### "+t},"######":function(t){return"###### "+t},bold:function(t){return"**"+t+"**"},italic:function(t){return"*"+t+"*"},strike:function(t){return"~~"+t+"~~"},upper:function(t){return"^"+t+"^"},quote:function(t){return"> "+t},line:function(t){return"---"},embed:function(t){return"["+t+"]("+t+")"},link:function(t,e){return"["+e+"]("+t+")"},img:function(t,e){return"!["+e+"]("+t+")"},imglink:function(t,e,n){return"[!["+e+"]("+t+")]("+n+")"}};function v(){var t=d(['\n      <div class="toolbox-controllers">\n        <div>\n          <button class="','" data-action="headlines" title="Nagłówki">H</button>\n          <button class="','" data-action="bold" title="Bold">B</button>\n          <button class="','" data-action="italic" title="Italic">I</button>\n          <button class="','" data-action="strike" title="Strike through">S</button>\n          <button class="','" data-action="quote" title="Blockquote">‟</button>\n          <button data-action="link" title="Create link">↸</button>\n          <button data-action="clear" title="Clear styles">※</button>\n          <button data-action="close" title="Close toolbox">✖</button>\n        </div>\n        <div ref="headlines" class="headlines">\n          <button class="','" data-action="#" title="Headline 1">H1</button>\n          <button class="','" data-action="##" title="Headline 2">H2</button>\n          <button class="','" data-action="###" title="Headline 3">H3</button>\n          <button class="','" data-action="####" title="Headline 4">H4</button>\n          <button class="','" data-action="#####" title="Headline 5">H5</button>\n          <button class="','" data-action="######" title="Headline 6">H6</button>\n        </div>\n      </div>\n    ']);return v=function(){return t},t}function h(t,e){u(t.parentNode?t:null,e)}function x(){var t=d(['\n      <div class="toolbox-controllers">\n        <div class="link list">\n          <input ref="alt" class="name" type="text" placeholder="Image alt text">\n          <input ref="url" class="name" type="text" placeholder="Image URL">\n          <input ref="link" class="name" type="text" placeholder="External URL">\n        </div>\n        <div>\n          <button data-action="update" title="Update image">\n            <i class="fa fa-check">✔</i>\n          </button>\n          <button data-action="copy" title="Copy link"">\n            <i class="fa fa-clipboard">❐</i>\n          </button>\n          <button data-action="close" title="Close toolbox">\n            <i class="fa fa-times">✖</i>\n          </button>\n        </div>\n      </div>\n    ']);return x=function(){return t},t}function k(){var t=d(['\n      <div class="toolbox-controllers">\n        <button data-action="follow" title="Open in YouTube">\n          <i class="fa fa-eraser">↗</i>\n        </button>\n        <button data-action="close" title="Close toolbox">\n          <i class="fa fa-times">✖</i>\n        </button>\n      </div>\n    ']);return k=function(){return t},t}function w(t){return Array.from(t.childNodes).reduce(function(t,e){if(3===e.nodeType)t+=e.textContent;else if("BR"===e.nodeName)t+="\n";else if("FIGURE"===e.nodeName)t+="embed"===e.dataset.md?p.embed(e.firstElementChild.alt):e.dataset.link?p.imglink(e.firstElementChild.src,e.firstElementChild.alt,e.dataset.link):p.img(e.firstElementChild.src,e.firstElementChild.alt);else if("A"===e.nodeName)t+=p.link(e.href,w(e));else{var n=p[e.dataset.md];t+=n?n(w(e)):e.textContent}return t},"")}function y(t){return b.reduce(function(t,e){return t.replace(e.match,e.format)},t)}var S=function(){return window.getSelection().anchorNode},C=function(t){var e=window.getSelection().getRangeAt(0),n=e.cloneRange();n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset);var a=n.toString().trim().length;return n.detach(),a},N=function(t){var e=document.createRange(),n=window.getSelection();return e.setStartAfter(t),e.setEndAfter(t),e.collapse(!0),n.removeAllRanges(),n.addRange(e),n},E=function(t){var e=document.createRange(),n=window.getSelection();return e.setStartBefore(t),e.setEndBefore(t),e.collapse(!0),n.removeAllRanges(),n.addRange(e),n},L=function(){var t=S();!function(t,e){var n=document.createRange(),a=window.getSelection();n.setStart(t,e),n.setEnd(t,e),n.collapse(!0),a.removeAllRanges(),a.addRange(n)}(t,C(t))},T=function(t){var e=S(),n=e.parentNode.dataset.block&&C(e)===e.textContent.length&&document.createTextNode("#");n&&e.parentNode.appendChild(n),t(),n&&n.remove()};export default function(t,e){var d;d=function(t){return void 0===t&&(t=""),'\n    *[data-miniedit]$NS:focus {\n      outline: none;\n    }\n\n    *[data-miniedit]$NS h1,\n    *[data-miniedit]$NS h2,\n    *[data-miniedit]$NS h3,\n    *[data-miniedit]$NS h4,\n    *[data-miniedit]$NS h5,\n    *[data-miniedit]$NS h6 {\n      display: inline-block;\n    }\n\n    *[data-miniedit]$NS h1[data-md="#"] {\n      font-weight: 600;\n      font-size: 1.8em;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS h2[data-md="##"] {\n      font-weight: 600;\n      font-size: 1.6em;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS h3[data-md="###"] {\n      font-weight: 600;\n      font-size: 1.4em;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS h4[data-md="####"] {\n      font-size: 1em;\n      margin: 0.5em 0;\n      font-weight: bold;\n      line-height: 1.2em;\n    }\n\n    *[data-miniedit]$NS blockquote[data-md="quote"] {\n      margin: 0;\n      width: 100%;\n      padding: 0.3em 1em;\n      display: inline-block;\n      background-color: #eee;\n    }\n\n    *[data-miniedit]$NS figure[data-md="img"],\n    *[data-miniedit]$NS figure[data-md="embed"] {\n      margin: 0;\n      overflow: hidden;\n      position: relative;\n      display: inline-block;\n    }\n\n    *[data-miniedit]$NS figure[data-md="embed"]::before {\n      top: 50%;\n      left: 50%;\n      width: 0;\n      height: 0;\n      content: "";\n      z-index: 10;\n      margin-left: 5px;\n      position: absolute;\n      border-top: 25px solid transparent;\n      border-bottom: 25px solid transparent;\n      border-left: 35px solid rgba(0,0,0,0.85);\n      transform: translateX(-50%) translateY(-50%);\n    }\n\n    *[data-miniedit]$NS figure[data-md="embed"]::after {\n      top: 50%;\n      left: 50%;\n      z-index: 10;\n      content: "";\n      width: 110px;\n      height: 110px;\n      position: absolute;\n      border-radius: 50%;\n      border: 10px solid rgba(0,0,0,0.85);\n      transform: translateX(-50%) translateY(-50%);\n    }\n\n    *[data-miniedit]$NS figure[data-md="img"] > *,\n    *[data-miniedit]$NS figure[data-md="embed"] > * {\n      pointer-events: none;\n    }\n\n    *[data-miniedit]$NS figure[data-md="img"] > img,\n    *[data-miniedit]$NS figure[data-md="embed"] > img {\n      height: auto;\n      display: block;\n      max-width: 100%;\n      margin: 1em auto;\n    }\n\n    *[data-miniedit]$NS a[data-md="link"] {\n      text-decoration:none;\n    }\n\n    *[data-miniedit]$NS a[data-md="link"]:hover {\n      text-decoration: underline;\n    }\n\n    *[data-miniedit]$NS hr[data-md="line"] {\n      width: 100%;\n      height: 1px;\n      border: none;\n      margin: 1.2em 0;\n      display: inline-block;\n      border-bottom: 1px solid #ccc;\n    }\n\n    /* TOOLBOX */\n\n    div[data-miniedit-toolbox] {\n      opacity: 0;\n      padding: 5px;\n      z-index: 3500;\n      position: fixed;\n      overflow: hidden;\n      visibility: hidden;\n      border-radius: 3px;\n      transform: translateZ(0);\n      background-image: linear-gradient(to bottom, rgba(49,49,47,.99), #262625);\n      transition: visibility 0s linear 0.3s, opacity .3s ease, top .4s ease, left .4s ease, transform .3s ease;\n    }\n\n    div[data-miniedit-toolbox].active {\n      opacity: 1;\n      visibility: visible;\n      transform: translateZ(0);\n      transition: opacity .3s ease, visibility 0s, top .4s ease, left .4s ease, transform .3s ease;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers .headlines {\n      display: none;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers .headlines.active {\n      display: block;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button {\n      width: 30px;\n      height: 30px;\n      border: none;\n      color: white;\n      background: none;\n      font-weight: 500;\n      position: relative;\n      display: inline-block;\n      transition: box-shadow .3s ease;\n      box-shadow: rgba(29, 100, 224, 0) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button > * {\n      pointer-events: none;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button:hover,\n    div[data-miniedit-toolbox] .toolbox-controllers button:focus {\n      outline: none;\n      box-shadow: rgb(29, 100, 224) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button.active::before {\n      top: 2px;\n      left: 2px;\n      right: 2px;\n      bottom: 2px;\n      content: "";\n      border-radius: 4px;\n      position: absolute;\n      background-color: rgba(0,0,0,0.2);\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button.active::after {\n      top: 3px;\n      right: 3px;\n      width: 5px;\n      height: 5px;\n      content: "";\n      border-radius: 50%;\n      position: absolute;\n      background-color: #dc3c09;\n    }\n\n    div[data-miniedit-toolbox] .toolbox-controllers button.pressable:active {\n      transform: scale(0.8);\n    }\n\n    div[data-miniedit-toolbox] .list {\n      display: flex;\n      flex-direction: column;\n    }\n\n    div[data-miniedit-toolbox] .justify-right {\n      display: flex;\n      width: 100%;\n      justify-content: flex-end;\n    }\n\n    div[data-miniedit-toolbox] .link input {\n      border: none;\n      padding: 3px;\n      color: white;\n      background: none;\n      transition: box-shadow .3s ease;\n      box-shadow: rgba(29, 100, 224, 0) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .link input:hover,\n    div[data-miniedit-toolbox] .link input:focus {\n      outline: none;\n      box-shadow: rgb(29, 100, 224) 0px -2px 0px 0px inset;\n    }\n\n    div[data-miniedit-toolbox] .link input.url {\n      color: #337ab7;\n    }\n  '.replace(/\$NS/g,t)}(e),document.head.appendChild(document.createElement("style")).textContent=d;var p=!1,A=null,H=!1,R=t instanceof HTMLElement?t:document.querySelector(t);R.dataset.block="true",R.dataset.miniedit="🧱",R.setAttribute("contenteditable",!0),R.focus();var $,M,D,O=function(t){var e,a,i,d,l=(d={italic:i=function(t){var e=n(v(),t.dataset.md.includes("#")?"active":"","bold"===t.dataset.md?"active":"","italic"===t.dataset.md?"active":"","strike"===t.dataset.md?"active":"","quote"===t.dataset.md?"active":"","#"===t.dataset.md?"active":"","##"===t.dataset.md?"active":"","###"===t.dataset.md?"active":"","####"===t.dataset.md?"active":"","#####"===t.dataset.md?"active":"","######"===t.dataset.md?"active":""),a=e[1];return{element:e[0],command:function(e){switch(e){case"headlines":return a.headlines.classList.toggle("active"),!0;case"bold":h(t,'<strong data-md="bold">'+t.innerHTML+"</strong>");break;case"italic":h(t,'<em data-md="italic">'+t.innerHTML+"</em>");break;case"strike":h(t,'<s data-md="strike">'+t.innerHTML+"</s>");break;case"quote":h(t,'<blockquote data-block="true" data-md="quote">'+t.innerHTML+"</blockquote>");break;case"link":h(t,'<a data-md="link" href="">'+t.innerHTML+"</a>");break;case"clear":1===t.nodeType&&(t.parentNode?c(t):document.execCommand("insertHTML",!1,t.textContent));break;default:h(t,"<"+g[n=e]+' data-md="'+n+'">'+t.innerHTML+"</"+g[n]+">")}var n}}},strong:i,strike:i,"#":i,"##":i,"###":i,"####":i,"#####":i,"######":i,quote:i,upper:i,line:i,link:function(t){var e=n(f()),a=e[0],i=e[1];return i.url.value=t.href,i.name.value=t.textContent,{element:a,command:function(e){switch(e){case"update":return void u(t,'<a href="'+i.url.value+'" data-md="link">'+i.name.value+"</a>");case"clear":return void(1===t.nodeType&&c(t));case"follow":return window.open(t.href,"_blank"),!0;case"copy":return i.url.select(),document.execCommand("copy"),i.url.blur(),!0}}}},img:function(t){var e=n(x()),a=e[0],i=e[1];return i.url.value=t.firstElementChild.src,i.alt.value=t.firstElementChild.alt,t.dataset.link&&(i.link.value=t.dataset.link),{element:a,command:function(e){switch(e){case"update":return o(t),void document.execCommand("insertHTML",!1,'<figure data-md="img" data-block="true" data-noedit="true" '+(i.link.value?'data-link="'+i.link.value+'" ':"")+'data-click="showImageOptions"><img src="'+i.url.value+'" alt="'+i.alt.value+'"/></figure>');case"copy":return i.url.select(),document.execCommand("copy"),i.url.blur(),!0}}}},embed:function(t){return{element:n(k()),command:function(e){switch(e){case"follow":window.open(t.firstElementChild.alt,"_blank")}}}}},{getEditor:function(t,e){return(d[t]||i)(e)}}),s=function(t,e){var n=t.match(/[\w-:]+=".+?"/g);n&&(n=n.map(function(t){return function(t,e){return[t.substring(0,e),t.substring(e+1)]}(t.replace(/"/g,""),t.indexOf("="))}));var a,i=~t.indexOf("[")?t.slice(0,t.indexOf("[")):t,o=~i.indexOf(".")?i.split("."):[i],r=o[0];if(o.length>0&&(o=o.slice(1,o.length).join(" ")),~r.indexOf("#")){var d=r.split("#");r=d[0],a=d[1]}var l=document.createElement(r);return a&&(l.id=a),n&&n.forEach(function(t){return l.setAttribute(t[0],t[1])}),o&&(l.className=o),l}('div[data-miniedit-toolbox="🧰"]');function m(){var t,n=l.getEditor(a.dataset.md,a);t=n,s.innerHTML="",s.appendChild(t.element),e=t;var i,o="selection"===(i=a).dataset.md?window.getSelection().getRangeAt(0).getBoundingClientRect():i.getBoundingClientRect(),r=o.x,d=o.width;s.style.top=o.y-s.offsetHeight-25+"px",s.style.left=(r+d)/2+n.element.offsetWidth/2+"px",s.classList.add("active"),window.addEventListener("scroll",b)}function b(t){s.contains(t.target)||(window.removeEventListener("scroll",b),s.classList.remove("active"),a=null)}function p(){s.classList.remove("active")}return t.parentNode.appendChild(s),s.addEventListener("click",function(t){if(t.target.dataset&&t.target.dataset.action)return"close"===t.target.dataset.action?p():void(e&&!e.command(t.target.dataset.action)&&p())}),Object.freeze({open:function(t){a=t,m()},close:function(){a=null,p()},selection:function(){var t=r();t.dataset.md="selection",a=t,m()}})}(R),q=($=function(){var t=S();T(function(){b.forEach(function(e){return function(t,e,n){var i;if(t)for(;i=e.exec(t.textContent);)a(t,i.index,e.lastIndex),document.execCommand("insertHTML",!1,n.apply(void 0,i))}(t,e.match,e.format)})})},function(){var t=arguments,e=function(){M=null,$.apply(void 0,[].slice.call(t))};clearTimeout(M),M=setTimeout(e,300)});return R.addEventListener("mousedown",function(t){(t.ctrlKey||t.metaKey)&&window.getSelection().toString().length&&(H=!0,t.preventDefault(),O.selection())}),R.addEventListener("click",function(t){if(A=null,!H){if(t.target.dataset.noedit)return t.preventDefault(),i(t.target),A=t.target,void((t.ctrlKey||t.metaKey)&&O.open(t.target));if(t.target.dataset&&t.target.dataset.md&&(t.ctrlKey||t.metaKey))return t.stopPropagation(),void O.open(t.target);O.close()}H=!1}),R.addEventListener("keydown",function(t){if(!A||t.code.includes("Arrow")||t.ctrlKey||t.metaKey||function(t){var e=document.createTextNode("\ufeff"),n=document.createTextNode("\ufeff");m(e,t),s(n,t),o(t),document.execCommand("delete")}(A),A=null,"Enter"===t.code){t.preventDefault();var e=S(),n=e.parentNode;return n.dataset.md&&(0===C(e)?E(n.previousSibling):N(n)),void document.execCommand("insertHTML",!1,'<br data-md="nl"/>&#8203;')}if((t.ctrlKey||t.metaKey)&&"Space"===t.code){var a=S().parentNode;return window.getSelection().getRangeAt(0).selectNode(a),void document.execCommand("insertHTML",!1,a.outerHTML+" ")}if("Backspace"===t.code)return window.getSelection().toString().length>0?(t.preventDefault(),document.execCommand("delete"),void L()):void 0;if("Delete"===t.code){var r=S();return window.getSelection().toString().length>0?(t.preventDefault(),document.execCommand("delete"),void L()):void(C(r)===r.textContent.length&&r.nextElementSibling&&r.nextElementSibling.dataset.block&&(t.preventDefault(),function(t){var e=document.createRange(),n=window.getSelection();e.setStart(t,0),e.setEnd(t,0),n.removeAllRanges(),n.addRange(e)}(r.nextElementSibling)))}if("KeyZ"!==t.code||!t.ctrlKey&&!t.metaKey){if((t.ctrlKey||t.metaKey)&&("KeyB"===t.code||"KeyI"===t.code))return t.preventDefault();if("F2"===t.code)return console.log(w(R));if("F4"!==t.code){var d=S();d.dataset&&d.dataset.noedit&&(t.preventDefault(),"ArrowDown"===t.code||"ArrowRight"===t.code?N(d.nextSibling):"ArrowUp"!==t.code&&"ArrowLeft"!==t.code||E(d.previousSibling),i(d),A=d),p=!1,q()}else{var l=S();T(function(){c(l.parentNode)})}}else p=!0}),R.addEventListener("drag",function(t){t.preventDefault()}),R.addEventListener("dragover",function(t){t.preventDefault()}),R.addEventListener("copy",function(t){t.preventDefault(),t.clipboardData.setData("text/plain",w(r()))}),R.addEventListener("cut",function(t){t.preventDefault(),t.clipboardData.setData("text/plain",w(r())),document.execCommand("delete")}),R.addEventListener("paste",function(t){t.preventDefault();var e=S();if(e===R||e.parentNode.dataset.block)T(function(){document.execCommand("insertHTML",!1,y(t.clipboardData.getData("text/plain")))});else{var n=document.createElement("div");n.innerHTML=y(t.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,n.textContent)}}),D=R,new MutationObserver(function(t,e){for(var n,a=function(t){var e=0;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(t){if("string"==typeof t)return l(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,void 0):void 0}}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}(t);!(n=a()).done;){var i=n.value;"childList"===i.type&&i.addedNodes[0]&&(/^\u200B/g.test((o=i.addedNodes[0]).textContent)||/^\uFEFF/g.test(o.textContent)&&p)&&o.remove()}var o}).observe(D,{subtree:!0,childList:!0,characterData:!1}),Object.freeze({setText:function(t){R.innerHTML=y(t)},insertText:function(t){T(function(){document.execCommand("insertHTML",!1,y(t))})},getText:function(){return w(R)}})}
